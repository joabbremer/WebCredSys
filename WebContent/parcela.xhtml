<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>CredSys</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<meta content="" name="CredSys" />
	<meta content="" name="Devit e Joab Bremer" />

	<h:outputStylesheet
		name="plugins/font-awesome/css/font-awesome.min.css"
		rel="stylesheet" type="text/css" />
	<h:outputStylesheet
		name="plugins/simple-line-icons/simple-line-icons.min.css"
		rel="stylesheet" type="text/css" />
	<h:outputStylesheet
		name="plugins/bootstrap/css/bootstrap.min.css"
		rel="stylesheet" type="text/css" />
	<h:outputStylesheet
		name="plugins/uniform/css/uniform.default.css"
		rel="stylesheet" type="text/css" />
	<h:outputStylesheet
		name="plugins/bootstrap-switch/css/bootstrap-switch.min.css"
		rel="stylesheet" type="text/css" />

	<h:outputStylesheet
		name="plugins/select2/css/select2.min.css"
		rel="stylesheet" type="text/css" />
	<h:outputStylesheet
		name="plugins/select2/css/select2-bootstrap.min.css"
		rel="stylesheet" type="text/css" />

	<h:outputStylesheet 
		name="css/components-md.min.css"
		rel="stylesheet" id="style_components" type="text/css" />
		
	<h:outputStylesheet 
		name="css/plugins-md.min.css"
		rel="stylesheet" type="text/css" />

	<h:outputStylesheet name="css/layout.min.css"
		rel="stylesheet" type="text/css" />
	
	<h:outputStylesheet
		name="css/light.min.css"
		rel="stylesheet" type="text/css" id="style_color" />
	
	
	<h:outputStylesheet name="css/custom.min.css"
		rel="stylesheet" type="text/css" />

</h:head>
<h:body
	styleClass="page-container-bg-solid page-header-fixed page-sidebar-closed-hide-logo page-md">

	<div class="page-header navbar navbar-fixed-top">
		<div class="page-header-inner ">
			<div class="page-logo">
				<img src="resources/img/logo.png" alt="logo" class="logo" />
				<div class="menu-toggler sidebar-toggler"></div>
			</div>
			<a href="javascript:;" class="menu-toggler responsive-toggler"
				data-toggle="collapse" data-target=".navbar-collapse"> </a>
		</div>
	</div>
	<div class="clearfix"></div>
	<div class="page-container">

		<!-- MENU LATERAL -->
		<div class="page-sidebar-wrapper">
			<div class="page-sidebar navbar-collapse collapse">
				<ul class="page-sidebar-menu   " data-keep-expanded="false"
					data-auto-scroll="true" data-slide-speed="200">
					<li class="heading">
						<h3 class="uppercase">Simulação</h3>
					</li>
					<li class="nav-item"><h:link outcome="simulacao"
							value="Simulação" styleClass="nav-link nav-toggle"></h:link></li>


					<li class="heading">
						<h3 class="uppercase">Cadastros</h3>
					</li>
					<li class="nav-item"><h:link outcome="index" value="Clientes"
							styleClass="nav-link nav-toggle"></h:link></li>
					<li class="nav-item"><h:link outcome="financiamento"
							value="Financiamento" styleClass="nav-link nav-toggle"></h:link>
					</li>
					<li class="nav-item"><h:link outcome="parcela"
							value="Parcelas" styleClass="nav-link nav-toggle"></h:link></li>
				</ul>
			</div>
		</div>
		<div class="page-content-wrapper">
			<div class="page-content">
				<div class="row">
					<div class="col-md-12">
						<div class="portlet light bordered" id="parcelas">
							<div class="portlet-title">
								<div class="caption">
									<i class=" icon-layers font-green-seagreen"></i> <span
										class="caption-subject bold uppercase">
										Consulta Parcelas</span>
								</div>
							</div>
							<div class="portlet-body form">
								<h:form class="form-horizontal" id="submit_form"
									method="POST">
									<div class="form-body"></div>
									<div class="form-actions">
									<label class="control-label col-md-3">CPF: </label>
										<div class="input-group col-md-6">
											<h:inputText value="#{clienteBean.PrepareToShare().cpf}" class="form-control" />
											<span class="input-group-btn"> <h:commandLink
													value="Buscar" action="#{clienteBean.SelectClienteByCpf()}"
													ajax="true" icon="ui-icon-refresh" process="@all"
													update=":formtotable:tableparcelas" class="btn blue" />

											</span>
										</div>
										<!-- Teste de modal - REMOVER! -->
										<a class="btn red-flamingo button-submit" data-toggle="modal" href="#confirmaPagamento"> Pagar </a>	
									</div>
								</h:form>
							</div>
						</div>


						<div class="portlet">
							<div class="portlet box green-seagreen">
								<div class="portlet-title">
									<div class="caption">
										<i class="fa fa-clone"></i>Parcelas
									</div>
								</div>
								<div class="portlet-body flip-scroll">

									<h:form name="formtotable">
										<h:panelGroup>
											<h:dataTable name="tableparcelas"
												value="#{parcelaBean.ListParcela()}" var="parcela"
												renderedIfEmpty="false"
												class="table table-bordered table-striped table-condensed flip-content">

												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Parcela" />
													</f:facet>
													<h:outputText
														value="#{parcela.numeroParcela}" />
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Vencimento" />
													</f:facet>
													<h:outputText value="#{parcela.dataVencimento}" >
														<f:convertDateTime pattern="dd/MM/yyyy"/>
													</h:outputText>
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Valor" />
													</f:facet>
													<h:outputLabel value="#{parcela.valor}"> 
														<f:convertNumber currencyCode="BRL" type="currency"/>
													</h:outputLabel>
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Juro" />
													</f:facet>
													<h:outputText value="#{parcela.valorJuro}" />
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Status" />
													</f:facet>
													<!-- Esse botão deve ser html puro para chamar o modal -->
													<h:commandLink action="#{parcelaBean.PrepareToPay(parcela)}" value="Pagar" class="btn red-flamingo button-submit"  />
																									
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Valor Total" />
													</f:facet>
													<h:outputText value="#{parcela.valorTotal}" />
												</h:column>
												<h:column headerText="SKU"
													style="text-align: center; width: 100px">
													<f:facet name="header">
														<h:outputText value="Valor Pago" />
													</f:facet>													
													<h:outputLabel value="#{parcela.valorPago}"> 
														<f:convertNumber currencyCode="BRL" type="currency"/>
													</h:outputLabel>
												</h:column>

											</h:dataTable>
										</h:panelGroup>
										   
										
									

									</h:form>
								</div>
							</div>

						</div>
						
						<div class="modal fade bs-modal-lg" id="confirmaPagamento" tabindex="-1" role="dialog" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h:form >
                                                    
                                                    	<div class="form-group">
															<label class="control-label col-md-3">Valor
															 <span class="required"> * </span>
															</label>
															<div class="col-md-4">
																<h:inputText id="valor"
																	value="#{parcelaBean.valor}"
																	class="form-control" title="Valor" required="true" />
															</div>
														</div>
                                                    	<h:commandLink
														action="#{parcelaBean.PrepareToPay()}"
														value="Pagar" class="btn red-flamingo button-submit" />
                                                    </h:form>
	                                                    
                                                	
                                                </div>
                                                
                                            </div>
                                            <!-- /.modal-content -->
                                        </div>
                                        <!-- /.modal-dialog -->
                                    </div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!--[if lt IE 9]>
<h:outputScript name="assets/global/Belgians/respond.min.js"/>
<h:outputScript name="assets/global/Belgians/excanvas.min.js"/> 
<![endif]-->

	<h:outputScript name="plugins/jquery.min.js" type="text/javascript" />
	<h:outputScript name="plugins/bootstrap/js/bootstrap.min.js"
		type="text/javascript" />
	<h:outputScript name="plugins/js.cookie.min.js" type="text/javascript" />
	<h:outputScript
		name="plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"
		type="text/javascript" />
	<h:outputScript
		name="plugins/jquery-slimscroll/jquery.slimscroll.min.js"
		type="text/javascript" />
	<h:outputScript name="plugins/jquery.blockui.min.js"
		type="text/javascript" />
	<h:outputScript name="plugins/uniform/jquery.uniform.min.js"
		type="text/javascript" />
	<h:outputScript
		name="plugins/bootstrap-switch/js/bootstrap-switch.min.js"
		type="text/javascript" />

	<h:outputScript name="plugins/select2/js/select2.full.min.js"
		type="text/javascript" />
	<h:outputScript
		name="plugins/jquery-validation/js/jquery.validate.min.js"
		type="text/javascript" />
	<h:outputScript
		name="plugins/jquery-validation/js/additional-methods.min.js"
		type="text/javascript" />
	<h:outputScript
		name="plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"
		type="text/javascript" />

	<h:outputScript name="js/app.min.js" type="text/javascript" />

	<h:outputScript name="js/form-wizard.min.js" type="text/javascript" />

	<h:outputScript name="js/layout.min.js" type="text/javascript" />
	<h:outputScript name="js/demo.min.js" type="text/javascript" />
	<h:outputScript name="js/quick-sidebar.min.js" type="text/javascript" />

</h:body>
</html>